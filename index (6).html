<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Potato Clicker - The Story Continues</title> <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <audio id="background-music" loop>
        <source src="https://raw.githubusercontent.com/PotatoDeveloper01/potato/refs/heads/main/Untitled%20(1)%20(3).mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <audio id="narrator-sound-1"> <source src="https://raw.githubusercontent.com/PotatoDeveloper01/potato/refs/heads/main/11L-Wise_old_man_babblin-1746230335644.mp3" type="audio/mpeg"></audio>
    <audio id="narrator-sound-2"> <source src="https://raw.githubusercontent.com/PotatoDeveloper01/potato/refs/heads/main/11L-Wise_old_man_babblin-1746230316113.mp3" type="audio/mpeg"></audio>
    <audio id="narrator-sound-3"> <source src="https://raw.githubusercontent.com/PotatoDeveloper01/potato/refs/heads/main/11L-Wise_old_man_babblin-1746230314933.mp3" type="audio/mpeg"></audio>
    <div id="pre-intro-overlay">
        <p id="pre-intro-text">Recommended to play using a desktop computer at 50-75% Zoom.</p>
        <button id="pre-intro-button" class="pixel-button">I understand</button>
    </div>
    <div id="pre-intro-flash"></div>
    <div id="studio-intro-overlay">
        <img id="studio-logo" src="https://videos.openai.com/vg-assets/assets%2Ftask_01jt4ymg30ee3s7bae3dtxk7dv%2F1746070672_img_0.webp?st=2025-05-01T02%3A36%3A41Z&se=2025-05-07T03%3A36%3A41Z&sks=b&skt=2025-05-01T02%3A36%3A41Z&ske=2025-05-07T03%3A36%3A41Z&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skoid=8ebb0df1-a278-4e2e-9c20-f2d373479b3a&skv=2019-02-02&sv=2018-11-09&sr=b&sp=r&spr=https%2Chttp&sig=tE5FlHzxgp3zOgZDdMNlAuvtNXo7y3ZODk3zpgjYDHA%3D&az=oaivgprodscus" alt="Studio Logo">
    </div>
    <div id="intro-overlay"> <div id="intro-potato-container"></div>
        <img id="intro-title-image" src="https://videos.openai.com/vg-assets/assets%2Ftask_01jt15cqhnfmtrt9h5gypsadjh%2F1745943502_img_0.webp?st=2025-04-29T14%3A59%3A07Z&se=2025-05-05T15%3A59%3A07Z&sks=b&skt=2025-04-29T14%3A59%3A07Z&ske=2025-05-05T15%3A59%3A07Z&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skoid=3d249c53-07fa-4ba4-9b65-0bf8eb4ea46a&skv=2019-02-02&sv=2018-11-09&sr=b&sp=r&spr=https%2Chttp&sig=bTLpz3JKH4hQHLK19d15mmKMKAgSFovv3DJH5JF5zxM%3D&az=oaivgprodscus" alt="Potato Empire Title" onerror="this.onerror=null; this.outerHTML='<h1 class=\'title-text-fallback\'>POTATO EMPIRE</h1>'">
        <div id="intro-prompt-text">Click to Continue</div>
        <div id="intro-menu-buttons"> <button id="intro-start-button" class="pixel-button intro-menu-button">Start Game</button>
             <button id="intro-settings-button" class="pixel-button intro-menu-button">Settings</button>
             <button id="intro-credits-button" class="pixel-button intro-menu-button">Credits</button>
             <button id="intro-updates-button" class="pixel-button intro-menu-button">Update Log</button>
        </div>
    </div>
    <div id="name-input-overlay" style="display: none;"> <h2>Welcome, Young Spud!</h2>
        <p>A grand adventure awaits! But first, what shall the legends call you?</p>
        <input type="text" id="player-name-input" maxlength="20" placeholder="Enter your name..." class="debug-input" style="color: #4d2c13; margin: 20px 0; text-align: center; font-size: 1.2rem;">
        <button id="submit-name-button" class="pixel-button buy-button">Embark on the Tale!</button>
        <p class="name-error-message" style="color: #f87171; margin-top: 10px; display: none;">Please enter a name!</p>
    </div>

    <div id="story-intro-overlay" style="display: none;"> <div id="story-background"></div> <div id="narrator-box-container"> <div id="narrator-area"> <img id="narrator-icon" src="https://videos.openai.com/vg-assets/assets%2Ftask_01jtbt9397efsb0bjm44v28pyj%2F1746300895_img_1.webp?st=2025-05-03T17%3A57%3A49Z&se=2025-05-09T18%3A57%3A49Z&sks=b&skt=2025-05-03T17%3A57%3A49Z&ske=2025-05-09T18%3A57%3A49Z&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skoid=3d249c53-07fa-4ba4-9b65-0bf8eb4ea46a&skv=2019-02-02&sv=2018-11-09&sr=b&sp=r&spr=https%2Chttp&sig=xjx5nCckDma3PX1MMDIdprM8aeTYhd5jArTKP6taIcs%3D&az=oaivgprodscus" alt="Wise Potato Icon">
                <div id="narrator-name">The Wise Potato:</div>
            </div>
            <div id="narrator-textbox"> <p id="narrator-text"></p> </div>
        </div>
        <button id="continue-button" class="pixel-button" style="display: none;">Continue...</button> </div>
    <div class="outer-container"> <div class="left-zone">
            <div id="stats-display">
                 <div id="prestige-stats-line" class="text-sm font-medium text-purple-300" style="display: none;"> Prestige: <span id="prestige-level">0</span> (<span id="prestige-multiplier">1</span>x)</div>
                 <p class="text-sm font-medium text-amber-300">Potatoes</p>
                 <p id="potato-count" class="font-bold text-amber-100">0</p>
                 <p class="text-sm font-medium text-amber-300 mt-1"><span id="pps">0</span> / sec</p>
                 <p class="text-sm font-medium text-green-300 mt-1">Click Power: <span id="click-power-stat">1</span></p>
                 <p class="text-sm font-medium text-amber-400 mt-1">Total: <span id="total-potatoes">0</span></p>
            </div>
            <div id="click-area" class="relative click-zone">
                <div id="potato-container" class="absolute inset-0">
                    <div id="cursor-orbit-container" class="cursor-orbit"></div>
                </div>
                <button id="potato-button" class="relative z-10 w-full h-full flex items-center justify-center focus:outline-none" aria-label="Click to harvest potato">
                    <img id="main-potato-img" src="https://media-hosting.imagekit.io/ba92ede10c404cff/unnamed-removebg-preview.png?Expires=1840549126&Key-Pair-Id=K2ZIVPTIP2VGHC&Signature=2Ey6QRBfNcH0iREjbWsx7EX4mZNUjkqElOhPYCfTf542XA8t9JYmQVnyXLqosqYeJlbwV0H1GaMUhzQEYjNi-8GJQp02hxsGfT~qE~TQ-mfVZFoN~QbRxu6Io-aRTyGFB-NbCXLkOiu5U-vHv9~rlUha9~x0fo7N65IxAmpVZ6TAou~-Bv~lS9VPaLeYPvRhTG5O1cgwsqC9ABY0ExkgFDCjRz7C5KzBR7sJp9s8lEg9ueXLisoajSfCkdsY1jzXHXqeiTzurlDgvbKB3d9AM1N8aVyYIkAQNLDLUzLjljDsFAWUQNb100psdCdToa7LpiTpnMOcCEFPulrlx24XUQ__" alt="Clickable Potato" class="object-contain" onerror="imageError(this, 'ðŸ¥”')">
                </button>
            </div>
            <div id="popularity-card" class="popularity-card">
                <div id="popularity-chat-bubble" class="chat-bubble">Nobody knows you... yet!</div>
                <img id="farmer-icon" src="https://media-hosting.imagekit.io/8776979a80514431/Screenshot_2025-04-29_10.51.32_AM-removebg-preview%20(1).png?Expires=1840547940&Key-Pair-Id=K2ZIVPTIP2VGHC&Signature=oA8X3nkQWeN~J~InrQdm0mFvyeoUZrguY0qoeq9redNbhy~ASujVS~hKrCDOVhfBWIYuivoRyk4fcKA0KxdhBtxgZrsbMLsevyoEWjLQ0JTcSz0a3WSPCnVn0etGInnT5nc~5GaQtIYJ~CMoeJu07mRtZYtjq9YjByr7OBwprQPAdN8hiMrjr0p5mSs1KLYJ8IfEQV6fRrC5w2cpdT0l2CCg-P6c05n7EIJOR9UVNq5Jd1l8OX6jGwEjVXBvpfkKotvCIT1QsGMZ4M~gDaNRUYgDAtYeZGIQnMp2~Jru7knU~5q5BiadlfUoZe2FVtyId9tXqG7v6IHBT8StiYhUDQ__" alt="Farmer" onerror="imageError(this, 'F')">
                <div class="text-content">
                    <div class="label">Popularity:</div>
                    <div id="popularity-level" class="level">Spud Start</div>
                </div>
            </div>
            <div id="message-box" class="h-6 text-sm font-medium text-red-400 flex-shrink-0"></div>
        </div>

        <div class="middle-zone">
            <div class="tab-buttons">
                <button id="tab-btn-clicks" class="tab-button active" onclick="switchTab('clicks')">Clicks</button>
                <button id="tab-btn-income" class="tab-button" onclick="switchTab('income')">Income</button>
            </div>
            <div class="tab-contents">
                <div id="tab-content-clicks" class="tab-content active">
                    <div class="custom-scrollbar"> <h3 class="text-xl font-semibold text-amber-200 mb-4 text-center flex-shrink-0">CLICK POWER</h3> <div id="click-upgrades-container" class="pr-2 space-y-3"></div> </div>
                </div>
                <div id="tab-content-income" class="tab-content">
                     <div class="custom-scrollbar"> <h3 class="text-xl font-semibold text-amber-200 mb-4 text-center flex-shrink-0">PASSIVE INCOME</h3> <div id="passive-upgrades-container" class="pr-2 space-y-3"></div> </div>
                </div>
            </div>
        </div>

        <div class="right-zone">
            <div class="tab-buttons">
                <button id="tab-btn-achievements" class="tab-button" onclick="switchTab('achievements')">Trophies</button>
                <button id="tab-btn-prestige" class="tab-button" onclick="switchTab('prestige')">Prestige</button>
                <button id="tab-btn-save" class="tab-button" onclick="switchTab('save')">Save</button>
            </div>
            <div class="tab-contents">
                <div id="tab-content-achievements" class="tab-content">
                     <div class="custom-scrollbar"> <h3 class="text-xl font-semibold text-yellow-300 mb-4 text-center flex-shrink-0">ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ ACHIEVEMENTS </h3> <div id="achievements-grid" class="pr-2"></div> </div>
                </div>
                <div id="tab-content-prestige" class="tab-content">
                    <div class="flex flex-col items-center text-center custom-scrollbar pr-2"> <h3 class="text-xl font-semibold text-purple-300 mb-4 flex-shrink-0">ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ PRESTIGE</h3> <img id="prestige-icon-large" src="https://media-hosting.imagekit.io/4c484922923044c5/Gemini_Generated_Image_jf78ybjf78ybjf78-removebg-preview.png?Expires=1840547551&Key-Pair-Id=K2ZIVPTIP2VGHC&Signature=lx3yqdT7ZF-KfcUSpj7soqJSN1SH0ONK6Yu9V3Z39OUK9Y2fKMP8pyXVTaWg9Ze69kE2-jGhokfZGMXI1FYBtx0p0RRJjj5OB5WlpfkDzMH5wswnZn8KR1IWik2s3lz5s9vsSagi9VylEBiVU7-QS7HyzvySrA-LMsoFDOpEWRR02alKLbwZ5FQ6iYcUfrAYICEdY5B7j3Rac5E05ExiKkhqOSYYHK7uD5x~roA~dPDktjlvY0mQlpS7-kOT~achgkzKNLSPxxgyMhkiOXaZEewYCRpWTnF9tAz~w-hSW~OJ5umXyJTpXFP6PI8AO2qKN-RqSD8gIhurTdktkOsJTw__" alt="Holy Potato" class="w-20 h-20 mb-4" onerror="imageError(this, 'P')"> <p id="prestige-readiness-text" class="text-sm text-center mb-3 flex-shrink-0">Checking worthiness...</p> <p class="text-lg text-amber-200 mb-2 flex-shrink-0">Reset progress for a permanent bonus!</p> <p class="text-lg text-amber-300 mb-4 flex-shrink-0">Req: <span id="prestige-requirement">10B</span> Potatoes</p> <button id="prestige-button" class="pixel-button prestige-button-style w-4/5 mb-3 flex-shrink-0" onclick="attemptPrestige()" disabled> Prestige (+<span id="next-prestige-level">1</span> Level)</button> <p class="text-lg text-purple-400 mt-auto flex-shrink-0">Current Bonus: <span id="current-prestige-bonus">1</span>x</p> </div>
                </div>
                <div id="tab-content-save" class="tab-content">
                   <div class="custom-scrollbar pr-2"> <h3 class="text-xl font-semibold text-cyan-300 mb-4 text-center flex-shrink-0">ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ã…¤ ã…¤ã…¤ã…¤ã…¤ã…¤SAVE / LOAD</h3>
                        <div class="space-y-5 text-lg">
                            <div>
                                <label for="save-code-area" class="block mb-1.5 text-cyan-200">Save Code:</label>
                                <div class="relative">
                                    <textarea id="save-code-area" rows="5" class="save-load-textarea" readonly></textarea>
                                    <button id="copy-save-button" class="pixel-button copy-button-style absolute bottom-1.5 right-1.5" onclick="copySaveCode()">Copy</button>
                                </div>
                                <button class="pixel-button save-button-style w-full mt-3" onclick="saveGame()">Generate Save Code</button>
                            </div>
                            <div>
                                <label for="load-code-area" class="block mb-1.5 text-orange-200">Load Code:</label>
                                <textarea id="load-code-area" rows="5" class="save-load-textarea" placeholder="Paste save code here... or type POTATO"></textarea>
                                <button class="pixel-button load-button-style w-full mt-3" onclick="loadGame()">Load Game Data</button>
                            </div>

                            <div class="pt-4">
                                 <button id="replay-story-button" class="pixel-button w-full bg-purple-700 hover:bg-purple-800 active:bg-purple-900 border-purple-900 text-yellow-100 text-shadow-none">
                                     Watch Story Intro Again
                                 </button>
                                 <p class="text-xs text-gray-400 text-center mt-2">Relive the beginning of your legend!</p>
                            </div>
                            <div class="mt-8 pt-4 border-t-2 border-red-800/50">
                               <button class="pixel-button w-full bg-red-700 hover:bg-red-800 active:bg-red-900 border-red-900 text-yellow-100 text-shadow-none" onclick="confirmResetGameData()">
                                   Reset All Progress
                               </button>
                               <p class="text-xs text-red-300 text-center mt-2">Warning: This cannot be undone!</p>
                            </div>

                            <p class="text-sm text-gray-400 text-center mt-5">Save often! Data is stored locally.</p>
                        </div> </div> </div> </div> </div> <div id="achievement-notification"> <img id="ach-notify-icon" src="" alt="" onerror="imageError(this, '?')"> <div class="text-content"> <div class="title">Achievement Unlocked!</div> <div id="ach-notify-name" class="name"></div> </div> </div>

        <div id="debug-menu-modal">
             <div class="debug-menu-content custom-scrollbar">
                 <h2>Debug Menu</h2>
                 <div class="input-group">
                     <label for="debug-click-modifier">Click Modifier (Set Base PPC):</label>
                     <input type="number" id="debug-click-modifier" class="debug-input" placeholder="Enter base PPC">
                     <button class="pixel-button debug-button w-full mt-2" onclick="applyClickModifier()">Apply Click Mod</button>
                 </div>
                 <div class="input-group">
                     <label for="debug-income-modifier">Income Modifier (Set Base PPS):</label>
                     <input type="number" id="debug-income-modifier" class="debug-input" placeholder="Enter base PPS">
                     <button class="pixel-button debug-button w-full mt-2" onclick="applyIncomeModifier()">Apply Income Mod</button>
                 </div>
                 <div class="input-group">
                     <label for="debug-prestige-level">Set Prestige Level:</label>
                     <input type="number" id="debug-prestige-level" class="debug-input" placeholder="Enter level">
                     <button class="pixel-button debug-button w-full mt-2" onclick="applyPrestigeLevel()">Apply Prestige Lvl</button>
                 </div>
                 <div class="input-group">
                     <label for="debug-potato-count">Set Current Potatoes:</label>
                     <input type="text" id="debug-potato-count" class="debug-input" placeholder="e.g., 10e9 or 10B">
                     <button class="pixel-button debug-button w-full mt-2" onclick="applyPotatoCount()">Apply Potatoes</button>
                 </div>
                 <div class="button-grid">
                     <button class="pixel-button debug-button" onclick="givePotatoGift()">Potato Gift</button>
                     <button class="pixel-button debug-button" onclick="forcePrestige()">Force Ascension</button>
                     <button class="pixel-button debug-button" onclick="unlockAllAchievements()">Unlock All Achievements</button>
                     <button class="pixel-button debug-button" onclick="resetAchievements()">Reset Achievements</button>
                     <button class="pixel-button debug-button" onclick="beatGame()">Beat the Game</button>
                     <button class="pixel-button debug-button" onclick="showGameConsole()">Game Console</button>
                     <button id="debug-trigger-meteor" class="pixel-button debug-button" onclick="debugTriggerMeteor()">Trigger Meteor</button>
                     <button id="debug-trigger-onfire" class="pixel-button debug-button" onclick="debugTriggerOnFire()">Trigger On Fire</button>
                 </div>
                 <button id="debug-close-button" class="pixel-button w-full" onclick="closeDebugMenu()">Close Menu</button>
             </div>
        </div>
        <div id="prestige-animation-overlay"> <img id="prestige-animation-image" src="https://media-hosting.imagekit.io/a896b15a2bce45a2/1745985600_img_0.png?Expires=1840594557&Key-Pair-Id=K2ZIVPTIP2VGHC&Signature=klfqtUfzu1KV413HnOppkIbmgDGCq~zbvEb4jPP-MO1kDhuEJkugz~cDb5X7tbiG71GpD6MJkXysqiP2p4ysisYEDqL24gX0hRHpUpdvuup6KwkkCCfF9yzlvHUDOHUdnoxi5zui7s9OGpmw2Ga~hI3XVOi0-lQXdD6Q0s0DmwZOmS8xL9T97EMxN3UAlD6PPINb4uCQwJh28OPKWlKfq8~AMGRnlGEk9ATkounfM0nRuL626RnoJxkaqok-kRfv1Se-7MxxkVyy2bV9LQaoenAe757tqwg9FfawuOqH1Reh7bopusDl2yWwKfehm7xMDzoseFZplDOTNNihacDf-A__" alt="Ascending Potato" onerror="imageError(this, 'P')"> <div id="prestige-animation-text">YOU ARE ASCENDING!</div> </div>
        <div id="prestige-flash-overlay"></div>
        <div id="meteor-message-container"></div>
        <div id="meteor-container"></div>

    </div> <div id="settings-modal" class="modal-overlay"> <div class="modal-content"> <h2 class="modal-title">Settings</h2> <div class="modal-body"> <label class="settings-label" for="music-toggle"> Background Music: <input type="checkbox" id="music-toggle" checked> <span class="toggle-slider"></span> </label> </div> <button class="pixel-button modal-close-button" onclick="closeModal('settings-modal')">Close</button> </div> </div>
    <div id="credits-modal" class="modal-overlay"> <div class="modal-content custom-scrollbar"> <h2 class="modal-title">Credits</h2> <div class="modal-body" id="credits-content"> <p><strong>Game Design & Development:</strong></p><p style="margin-left: 15px;">[Your Name / Studio Name]</p><br><p><strong>AI Assistance:</strong></p><p style="margin-left: 15px;">Google Gemini</p><br><p><strong>Assets:</strong></p><p style="margin-left: 15px;">Various sources including AI generation</p><br><p><strong>Music:</strong></p><p style="margin-left: 15px;">[Specify Music Source/Artist if known]</p><br><p><strong>Special Thanks:</strong></p><p style="margin-left: 15px;">You, the player!</p> </div> <button class="pixel-button modal-close-button" onclick="closeModal('credits-modal')">Close</button> </div> </div>
    <div id="updates-modal" class="modal-overlay"> <div class="modal-content custom-scrollbar"> <h2 class="modal-title">Update Log</h2> <div class="modal-body" id="updates-content"> <p><strong>Version 7.1 ([Date]):</strong></p><ul><li>Integrated Intro sequence (Disclaimer, Studio Logo, Flashes).</li><li>Added Main Menu (Start, Settings, Credits, Updates).</li><li>Implemented Prestige rework (current potato cost, doubling requirement).</li><li>Implemented Popularity icon update (Pro Farmer icon persists).</li><li>Added Modals for Settings, Credits, Update Log.</li><li>Enhanced Debug Menu options.</li><li>Merged features into separate file structure.</li><li>Added second flash between studio & main intro.</li><li>Bug Fixes (Clicking, Menu Buttons, Upgrade Unlock).</li></ul><p><em>(Previous updates not listed)</em></p> </div> <button class="pixel-button modal-close-button" onclick="closeModal('updates-modal')">Close</button> </div> </div>
    <script src="script.js" defer></script>
</body>
</html>